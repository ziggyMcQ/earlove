<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>earlove — Set Up Your Own Instance</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #09090b;
      --surface: #18181b;
      --border: #27272a;
      --border-hover: #3f3f46;
      --text: #fafafa;
      --text-muted: #a1a1aa;
      --text-dim: #71717a;
      --green: #22c55e;
      --green-dim: rgba(34,197,94,.12);
      --green-border: rgba(34,197,94,.25);
      --radius: 16px;
      --max-w: 680px;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
    }

    a { color: var(--green); text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* ── Layout ────────────────────────────────── */
    .wrapper {
      max-width: var(--max-w);
      margin: 0 auto;
      padding: 3rem 1.25rem 6rem;
    }

    /* ── Hero ──────────────────────────────────── */
    .hero {
      text-align: center;
      margin-bottom: 3.5rem;
    }
    .hero h1 {
      font-size: 3rem;
      font-weight: 800;
      letter-spacing: -.03em;
      margin-bottom: .5rem;
    }
    .hero h1 span { color: var(--green); }
    .hero p {
      color: var(--text-muted);
      font-size: .95rem;
      max-width: 460px;
      margin: 0 auto;
    }

    /* ── Progress ──────────────────────────────── */
    .progress {
      display: flex;
      justify-content: center;
      gap: .5rem;
      margin-bottom: 2.5rem;
    }
    .progress-dot {
      width: 10px; height: 10px;
      border-radius: 50%;
      background: var(--border);
      transition: background .3s;
      cursor: pointer;
    }
    .progress-dot.active { background: var(--green); }
    .progress-dot.done { background: var(--green); opacity: .45; }

    /* ── Step Card ─────────────────────────────── */
    .step {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem 1.75rem;
      margin-bottom: 1rem;
      overflow: hidden;
    }
    .step-label {
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .08em;
      color: var(--green);
      font-weight: 600;
      margin-bottom: .75rem;
    }
    .step h2 {
      font-size: 1.35rem;
      font-weight: 700;
      margin-bottom: 1rem;
    }
    .step p, .step li {
      color: var(--text-muted);
      font-size: .9rem;
    }
    .step ul {
      list-style: none;
      padding: 0;
    }
    .step li {
      padding: .4rem 0;
      padding-left: 1.4rem;
      position: relative;
    }
    .step li::before {
      content: '→';
      position: absolute;
      left: 0;
      color: var(--green);
    }

    /* ── Callout ───────────────────────────────── */
    .callout {
      background: var(--green-dim);
      border: 1px solid var(--green-border);
      border-radius: 10px;
      padding: 1rem 1.25rem;
      margin: 1rem 0;
      font-size: .85rem;
      color: var(--text-muted);
    }
    .callout strong { color: var(--green); }

    /* ── Code block ────────────────────────────── */
    .code-block {
      position: relative;
      background: #111113;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem 1.25rem;
      margin: 1rem 0;
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: .82rem;
      color: var(--text-muted);
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-all;
    }

    /* ── Copy button ───────────────────────────── */
    .copy-btn {
      position: absolute;
      top: .5rem; right: .5rem;
      background: var(--border);
      border: none;
      border-radius: 6px;
      color: var(--text-dim);
      font-size: .7rem;
      padding: .3rem .6rem;
      cursor: pointer;
      transition: background .2s, color .2s;
    }
    .copy-btn:hover { background: var(--border-hover); color: var(--text); }
    .copy-btn.copied { background: var(--green); color: #000; }

    /* ── Buttons ───────────────────────────────── */
    .nav-row {
      display: flex;
      justify-content: space-between;
      margin-top: 2rem;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .7rem 1.5rem;
      border-radius: 999px;
      font-size: .85rem;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: background .2s, opacity .2s;
    }
    .btn-primary { background: var(--green); color: #000; }
    .btn-primary:hover { opacity: .85; }
    .btn-secondary { background: var(--border); color: var(--text-muted); }
    .btn-secondary:hover { background: var(--border-hover); }
    .btn:disabled { opacity: .3; cursor: not-allowed; }

    /* ── Deploy button ─────────────────────────── */
    .deploy-area {
      text-align: center;
      margin: 1.5rem 0;
    }
    .deploy-area a img { border-radius: 8px; }

    /* ── Footer ────────────────────────────────── */
    .footer {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid var(--border);
      text-align: center;
    }
    .footer p {
      font-size: .8rem;
      color: var(--text-dim);
      margin-bottom: .5rem;
    }
    .footer a { color: var(--green); }

    /* ── Responsive ────────────────────────────── */
    @media (max-width: 480px) {
      .wrapper { padding: 2rem 1rem 4rem; }
      .hero h1 { font-size: 2.25rem; }
      .step { padding: 1.5rem 1.25rem; }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <!-- Hero -->
    <div class="hero">
      <h1>ear<span>love</span></h1>
      <p>Set up your own instance in 4 steps. No coding required &mdash; just a Spotify account and a free Vercel account.</p>
    </div>

    <!-- Progress dots -->
    <div class="progress" id="progress"></div>

    <!-- ════════════════════════════════════════════
         STEP 1
         ════════════════════════════════════════════ -->
    <div class="step" id="step-0" style="display:none">
      <div class="step-label">Step 1 of 4</div>
      <h2>Create a Spotify App</h2>
      <ul>
        <li>Go to the <a href="https://developer.spotify.com/dashboard" target="_blank" rel="noopener">Spotify Developer Dashboard</a> and log in.</li>
        <li>Click <strong style="color:var(--text)">Create App</strong>.</li>
        <li>Name it anything you like (e.g. "my earlove").</li>
        <li>Add a short description &mdash; anything works.</li>
        <li>For <strong style="color:var(--text)">Redirect URI</strong>, enter a placeholder for now:<br>
          <code style="color:var(--green)">https://placeholder.vercel.app/api/auth/callback</code></li>
        <li>Check the <strong style="color:var(--text)">Web API</strong> box under "Which API/SDKs are you planning to use?"</li>
        <li>Accept the terms and click <strong style="color:var(--text)">Save</strong>.</li>
      </ul>
      <div class="callout">
        <strong>Note:</strong> You'll come back to update the Redirect URI after you deploy in Step 4.
      </div>
    </div>

    <!-- ════════════════════════════════════════════
         STEP 2
         ════════════════════════════════════════════ -->
    <div class="step" id="step-1" style="display:none">
      <div class="step-label">Step 2 of 4</div>
      <h2>Copy Your Credentials</h2>
      <p>Inside your new Spotify app, go to <strong style="color:var(--text)">Settings</strong>.</p>
      <ul>
        <li>Copy the <strong style="color:var(--text)">Client ID</strong> &mdash; it's shown right on the page.</li>
        <li>Click <strong style="color:var(--text)">View client secret</strong> and copy that too.</li>
      </ul>
      <div class="callout">
        <strong>Keep these handy.</strong> You'll paste them in the next step when Vercel asks for environment variables.
      </div>
    </div>

    <!-- ════════════════════════════════════════════
         STEP 3
         ════════════════════════════════════════════ -->
    <div class="step" id="step-2" style="display:none">
      <div class="step-label">Step 3 of 4</div>
      <h2>Deploy Your Instance</h2>
      <p>Click the button below to deploy earlove to Vercel (free). It will ask you for a few environment variables.</p>

      <div class="deploy-area">
        <a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FziggyMcQ%2Fearlove&env=SPOTIFY_CLIENT_ID,SPOTIFY_CLIENT_SECRET,NEXTAUTH_SECRET&envDescription=Spotify%20credentials%20from%20developer.spotify.com%2Fdashboard&envLink=https%3A%2F%2FziggyMcQ.github.io%2Fearlove&project-name=earlove" target="_blank" rel="noopener">
          <img src="https://vercel.com/button" alt="Deploy with Vercel" width="180" />
        </a>
      </div>

      <p>When prompted for environment variables:</p>
      <ul>
        <li><strong style="color:var(--text)">SPOTIFY_CLIENT_ID</strong> &mdash; paste the Client ID from Step 2.</li>
        <li><strong style="color:var(--text)">SPOTIFY_CLIENT_SECRET</strong> &mdash; paste the Client Secret from Step 2.</li>
        <li><strong style="color:var(--text)">NEXTAUTH_SECRET</strong> &mdash; a random string for session security. Generate one now:</li>
      </ul>

      <div class="code-block" id="secret-block">openssl rand -base64 32<button class="copy-btn" onclick="copyText('openssl rand -base64 32', this)">copy</button></div>

      <p style="font-size:.82rem;color:var(--text-dim)">Run that command in your terminal, or use an <a href="https://generate-secret.vercel.app/32" target="_blank" rel="noopener">online generator</a> and paste the result.</p>
    </div>

    <!-- ════════════════════════════════════════════
         STEP 4
         ════════════════════════════════════════════ -->
    <div class="step" id="step-3" style="display:none">
      <div class="step-label">Step 4 of 4</div>
      <h2>Connect the Dots</h2>
      <p>After Vercel finishes deploying, you'll get a URL like <code style="color:var(--green)">my-earlove.vercel.app</code>. Now wire everything together:</p>

      <h3 style="font-size:1rem;margin:1.25rem 0 .5rem;color:var(--text)">A. Update your Spotify Redirect URI</h3>
      <ul>
        <li>Go back to your <a href="https://developer.spotify.com/dashboard" target="_blank" rel="noopener">Spotify Dashboard</a> app settings.</li>
        <li>Replace the placeholder Redirect URI with:<br>
          <code style="color:var(--green)">https://YOUR-APP.vercel.app/api/auth/callback</code></li>
        <li>Click <strong style="color:var(--text)">Save</strong>.</li>
      </ul>

      <h3 style="font-size:1rem;margin:1.25rem 0 .5rem;color:var(--text)">B. Add the redirect URI to Vercel</h3>
      <ul>
        <li>In Vercel, go to your project → <strong style="color:var(--text)">Settings → Environment Variables</strong>.</li>
        <li>Add a new variable:</li>
      </ul>
      <div class="code-block">SPOTIFY_REDIRECT_URI=https://YOUR-APP.vercel.app/api/auth/callback<button class="copy-btn" onclick="copyText('SPOTIFY_REDIRECT_URI=https://YOUR-APP.vercel.app/api/auth/callback', this)">copy</button></div>

      <h3 style="font-size:1rem;margin:1.25rem 0 .5rem;color:var(--text)">C. Add users to your Spotify app</h3>
      <ul>
        <li>In the Spotify Dashboard, go to your app → <strong style="color:var(--text)">User Management</strong>.</li>
        <li>Add the Spotify email addresses of anyone you want to grant access (up to 5 users in dev mode).</li>
      </ul>

      <h3 style="font-size:1rem;margin:1.25rem 0 .5rem;color:var(--text)">D. Redeploy</h3>
      <ul>
        <li>In Vercel, go to <strong style="color:var(--text)">Deployments</strong> → click the <strong style="color:var(--text)">⋯</strong> menu on the latest deploy → <strong style="color:var(--text)">Redeploy</strong>.</li>
        <li>Once it finishes, visit your URL and log in with Spotify. You're live!</li>
      </ul>

      <div class="callout">
        <strong>That's it!</strong> Your own earlove instance is running. Share the link with your allowlisted users &mdash; each of them sees their own unique listening profile.
      </div>
    </div>

    <!-- Nav buttons -->
    <div class="nav-row">
      <button class="btn btn-secondary" id="prev-btn" onclick="navigate(-1)">← Back</button>
      <button class="btn btn-primary" id="next-btn" onclick="navigate(1)">Next →</button>
    </div>

    <!-- Footer -->
    <div class="footer">
      <p>
        Spotify's Developer Mode limits each app to 5 users.<br>
        Each person who sets up their own instance can invite 5 more &mdash; that's how it grows.
      </p>
      <p style="margin-top:1rem;">
        <a href="https://github.com/ziggyMcQ/earlove" target="_blank" rel="noopener">View on GitHub</a>
        &nbsp;·&nbsp;
        Open-source under the MIT License
      </p>
    </div>
  </div>

  <script>
    const TOTAL = 4;
    let current = 0;

    function render() {
      for (let i = 0; i < TOTAL; i++) {
        document.getElementById('step-' + i).style.display = (i === current) ? 'block' : 'none';
      }
      // progress dots
      const prog = document.getElementById('progress');
      prog.innerHTML = '';
      for (let i = 0; i < TOTAL; i++) {
        const dot = document.createElement('div');
        dot.className = 'progress-dot' + (i === current ? ' active' : i < current ? ' done' : '');
        dot.onclick = () => { current = i; render(); };
        prog.appendChild(dot);
      }
      // nav buttons
      document.getElementById('prev-btn').disabled = current === 0;
      const nextBtn = document.getElementById('next-btn');
      if (current === TOTAL - 1) {
        nextBtn.textContent = 'Done ✓';
        nextBtn.disabled = true;
      } else {
        nextBtn.textContent = 'Next →';
        nextBtn.disabled = false;
      }
    }

    function navigate(dir) {
      const next = current + dir;
      if (next >= 0 && next < TOTAL) { current = next; render(); window.scrollTo({ top: 0, behavior: 'smooth' }); }
    }

    function copyText(text, btn) {
      navigator.clipboard.writeText(text).then(() => {
        btn.textContent = 'copied!';
        btn.classList.add('copied');
        setTimeout(() => { btn.textContent = 'copy'; btn.classList.remove('copied'); }, 1500);
      });
    }

    render();
  </script>
</body>
</html>
